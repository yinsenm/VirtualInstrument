C51 COMPILER V9.54   UART                                                                  07/16/2015 10:44:16 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN .\Objects\uart.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE uart.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\uart
                    -.lst) OBJECT(.\Objects\uart.obj)

line level    source

   1          /*
   2                  串口驱动模块
   3          */
   4          
   5          #include <reg52.h>
   6          
   7          // 串口中断
   8          void UART_isr() interrupt 4 {
   9   1              if (RI) {
  10   2      
  11   2              }
  12   1      }
  13          
  14          //串口发送一字节
  15          void UART_SendByte(unsigned char _data) {
  16   1              SBUF = _data;   /* 发送数据送缓冲 */
  17   1              while(!TI);             /* 等待发送完成 */
  18   1              TI = 0;
  19   1      }
  20          
  21          
  22          //串口接收一字节
  23          unsigned char UART_GetByte() {
  24   1              unsigned char c;
  25   1              while (RI == 0);
  26   1              c = SBUF;
  27   1              RI = 0; 
  28   1              return c;
  29   1      }
  30          
  31          //串口发送字符串
  32          void UART_SendStr(unsigned char *str, unsigned char len) {
  33   1              while(len --){
  34   2                      UART_SendByte(*str++);
  35   2              }
  36   1      }
  37          
  38          //串口初始化
  39          void UART_Init() {          //9600bps@11.0592MHz
  40   1              PCON &= 0x7F;           //波特率不倍速
  41   1              SCON = 0x50;            //8位数据,可变波特率
  42   1              TMOD &= 0x0F;           //清除定时器1模式位
  43   1              TMOD |= 0x20;           //设定定时器1为8位自动重装方式
  44   1              TL1 = 0xFD;             //设定定时初值
  45   1              TH1 = 0xFD;             //设定定时器重装值
  46   1              ET1 = 0;                //禁止定时器1中断
  47   1              TR1 = 1;                //启动定时器1
  48   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     76    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V9.54   UART                                                                  07/16/2015 10:44:16 PAGE 2   

   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
